!function(e){var t=function(e){this.$e=e;this.skin()};t.prototype={skin:function(){var t=this;e("#cv",this.$e).hide();this.parts=[];e("#cv >div",this.$e).each(function(){var n=e(this);var r={title:e("h3",n).text(),sol:[]};e("li",n).each(function(){var t=e(this);r.sol.push({current:t.is(".current"),date:e(".date",t).html(),name:e("strong",t).html(),where:e(".lieu",t).html()})});t.parts.push(r)});var n='<div class="container ltps">',r=this.parts.length,i;for(i=0;i<r;i++){var s=this.parts[i].sol.length,o=2*Math.floor(100/(s+2));n+='<div class="lt_part" data-plop="'+i+'"><div class="ltp_wrapper"><span class="ltps_bar"></span>';for(var u=0;u<s;u++){n+='<div class="lt_slice '+(Math.floor(u/2)==u/2?"lts_even":"lts_odd")+(this.parts[i].sol[u].current?" lts_current":"")+'" style="width: '+o+"%; margin-left: "+(u*(o/2)+i*o/4)+'%"><div class="lts_w"><span class="lts_name">'+this.parts[i].sol[u].name+'</span><span class="lts_where">'+this.parts[i].sol[u].where+'</span><span class="lts_date">'+this.parts[i].sol[u].date+'</span><span class="lts_location"><i class="glyphicon glyphicon-map-marker"></i></span><span class="lts_rd"></span> 						</div></div>'}n+="</div></div>"}n+="</div>";this.$e.append(n);e(".ltps, .lt_part, .ltp_wrapper").height(this.$e.height());e(".lt_part").each(function(n){var i=e(this);if(n==0)i.eq(0).css("margin-left",0);if(n!=0)e(".ltp_wrapper",i).append('<a href="#" class="ltp_prev" title="'+t.parts[n-1].title+'"><i class="glyphicon glyphicon-chevron-left"></i></a>');if(n!=r-1)e(".ltp_wrapper",i).append('<a href="#" class="ltp_next" title="'+t.parts[n+1].title+'"><i class="glyphicon glyphicon-chevron-right"></i></a>')});e(".ltp_next").on("click",function(){var t=e(this).parents(".lt_part");t.animate({"margin-left":"-100%"},400);e(".lt_part[data-plop="+(parseInt(t.data("plop"))+1)+"]").animate({"margin-left":0},400);return false});e(".ltp_prev").on("click",function(){var t=e(this).parents(".lt_part");t.animate({"margin-left":"100%"},400);e(".lt_part[data-plop="+(parseInt(t.data("plop"))-1)+"]").animate({"margin-left":0},400);return false});e(".ltp_prev, .ltp_next").tooltip()}};e.fn.lifetime=function(){return this.each(function(){var n=e(this),r=n.data("LifeTime");if(!r)n.data("LifeTime",r=new t(n))})}}(window.jQuery);
