// moodular
!function(a){"use strict";var b=function(b,c,d,e){this.opts=c,this.ctrls=d,this.fxs=e,this.$element=a(b),this.current=0,this.next=-1,this.items=a(">"+this.opts.selector,this.$element),this.nbItems=this.items.length,this.init()};b.prototype={init:function(){this.$element.css("position","relative"),this.items.css({position:"absolute",top:0,left:0});var b=this;this.$element.on("moodular.prev",function(){-1==b.next&&(b.next=b.current-b.opts.step,b.next<0&&(b.next+=b.nbItems))}).on("moodular.next",function(){-1==b.next&&(b.next=(b.current+b.opts.step)%b.nbItems)}).on("moodular.prev moodular.next",function(){b.stop(),b.items.removeClass("active").eq(b.next).addClass("active")});var c=this.opts.effects.split(" ");for(var d in c)a.isFunction(this.fxs[c[d]])&&this.fxs[c[d]](this);var e=this.opts.controls.split(" ");for(var d in e)a.isFunction(this.ctrls[e[d]])&&this.ctrls[e[d]](this);this.$element.on("moodular.prev moodular.next",function(){b.current=b.next,b.next=-1,b.start()}),this.items.eq(0).addClass("active"),this.start()},start:function(){var a=this;this.opts.timer&&(this.timer=setTimeout(function(){a.$element.trigger("moodular.next")},this.opts.timer))},stop:function(){clearTimeout(this.timer)},moveTo:function(a){var b=a%this.nbItems;b!=this.current&&(this.next=b,this.$element.trigger("moodular.next"))}},a.fn.moodular=function(c,d){return this.each(function(){var e=a(this),f=e.data("moodular"),g=a.extend({},a.fn.moodular.defaults,e.data(),"object"==typeof c&&c),h=a.extend({},a.fn.moodular.controls),i=a.extend({},a.fn.moodular.effects);f||e.data("moodular",f=new b(this,g,h,i)),"string"==typeof c&&f[c](d)})},a.fn.moodular.defaults={speed:500,timer:0,step:1,effects:"",controls:"",easing:"",selector:"li",queue:!1},a.fn.moodular.controls={},a.fn.moodular.effects={}}(window.jQuery),!function(a){a.extend(a.fn.moodular.effects,{left:function(b){"undefined"==typeof b.opts.view&&(b.opts.view=1);var c=100/b.opts.view;b.items.css("left","100%").width(c+"%");for(var d=0;d<b.opts.view+b.opts.step;d++)b.items.eq(d).css("left",d*c+"%");var e="="+c*b.opts.step+"%",f={duration:b.opts.speed,easing:b.opts.easing,queue:b.opts.queue};b.$element.on("moodular.next",function(){if(1==b.opts.view)b.items.eq(b.current).css("left",0).animate({left:"-"+e},{duration:b.opts.speed,easing:b.opts.easing,queue:b.opts.queue,complete:function(){a(this).css("left","-100%")}}),b.items.eq(b.next).css("left","100%").animate({left:0},f);else if(b.opts.view<b.nbItems)for(var d=0;d<b.opts.view+b.opts.step;d++)b.items.eq((b.current+d)%b.nbItems).css("left",d*c+"%").animate({left:"-"+e},f)}).on("moodular.prev",function(){if(1==b.opts.view)b.items.eq(b.current).css("left",0).animate({left:"+"+e},{duration:b.opts.speed,easing:b.opts.easing,queue:b.opts.queue,complete:function(){a(this).css("left","100%")}}),b.items.eq(b.next).css("left","-100%").animate({left:0},f);else if(b.opts.view<b.nbItems){for(var d=0;d<b.opts.view;d++)b.items.eq((b.current+d)%b.nbItems).css("left",d*c+"%").animate({left:"+"+e},f);for(var d=1;d<=b.opts.step;d++)b.items.eq((b.current-d)%b.nbItems).css("left",-d*c+"%").animate({left:"+"+e},f)}})},resize:function(b){"undefined"==typeof b.opts.ratio&&(b.opts.ratio=0),b.opts.ratio&&a(window).on("resize",function(){b.$element.height(parseInt(b.$element.width())/b.opts.ratio)})}})}(window.jQuery),!function(a){a.extend(a.fn.moodular.controls,{keys:function(b){"undefined"==typeof b.opts.keyPrev&&(b.opts.keyPrev=37),"undefined"==typeof b.opts.keyNext&&(b.opts.keyNext=39),a(document).on("keydown",function(a){return a.keyCode==b.opts.keyPrev?(b.$element.trigger("moodular.prev"),!1):a.keyCode==b.opts.keyNext?(b.$element.trigger("moodular.next"),!1):void 0})},buttons:function(a){"undefined"==typeof a.opts.view&&(a.opts.view=1),a.nbItems<=a.opts.view&&(a.opts.buttonPrev.hide(),a.opts.buttonNext.hide()),a.opts.buttonPrev.on("click",function(){return a.$element.trigger("moodular.prev"),!1}),a.opts.buttonNext.on("click",function(){return a.$element.trigger("moodular.next"),!1})}})}(window.jQuery);
